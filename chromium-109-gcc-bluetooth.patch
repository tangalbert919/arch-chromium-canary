From 58cafc5074937af6e8aa09dc41b3cc6fac3261b1 Mon Sep 17 00:00:00 2001
From: Jose Dapena Paz <jdapena@igalia.com>
Date: Tue, 25 Oct 2022 09:59:37 +0200
Subject: [PATCH] GCC: use all brace-initializers for GetDBusTypeInfo NoDestructor

GCC fails to resolve from constructor to initializer list.

Bug: 819294
Change-Id: I16b003ed68e743546a768778c55d79b340443f45
---

diff --git a/device/bluetooth/floss/floss_dbus_client.h b/device/bluetooth/floss/floss_dbus_client.h
index 57b328fc..e79c75c 100644
--- a/device/bluetooth/floss/floss_dbus_client.h
+++ b/device/bluetooth/floss/floss_dbus_client.h
@@ -296,9 +296,9 @@
 const DBusTypeInfo& GetDBusTypeInfo(const std::vector<T>*) {
   static base::NoDestructor<DBusTypeInfo> elem_info(
       GetDBusTypeInfo(static_cast<T*>(nullptr)));
-  static base::NoDestructor<DBusTypeInfo> info(
+  static base::NoDestructor<DBusTypeInfo> info{
       {"a" + elem_info->dbus_signature,
-       "vector<" + elem_info->type_name + ">"});
+       "vector<" + elem_info->type_name + ">"}};
   return *info;
 }
 
@@ -308,11 +308,11 @@
       GetDBusTypeInfo(static_cast<T*>(nullptr)));
   static base::NoDestructor<DBusTypeInfo> val_info(
       GetDBusTypeInfo(static_cast<U*>(nullptr)));
-  static base::NoDestructor<DBusTypeInfo> info(
+  static base::NoDestructor<DBusTypeInfo> info{
       {std::string("a{") + key_info->dbus_signature + val_info->dbus_signature +
            std::string("}"),
        std::string("map<") + key_info->type_name + ", " + val_info->type_name +
-           std::string(">")});
+           std::string(">")}};
   return *info;
 }
 
